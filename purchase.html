<!-- purchase.html -->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- TITLE + SEO -->
  <title>สั่งซื้อ | IRT GOLD</title>
  <meta name="description" content="สั่งซื้อผลิตภัณฑ์/เครื่องมือจาก IRT GOLD พร้อมวิธีชำระเงินและติดต่อทีมงาน" />
  <link rel="canonical" href="https://irtgold.github.io/irtgold/purchase.html" />

  <!-- Open Graph -->
  <meta property="og:title" content="สั่งซื้อ | IRT GOLD" />
  <meta property="og:description" content="เลือกแพ็กเกจและชำระเงินได้ง่าย ๆ กับ IRT GOLD" />
  <meta property="og:url" content="https://irtgold.github.io/irtgold/purchase.html" />
  <meta property="og:type" content="website" />
  <!-- ถ้ามีภาพให้ใส่ URL รูปของหน้านี้ได้ เช่น
  <meta property="og:image" content="https://irtgold.github.io/irtgold/assets/og-purchase.jpg" /> -->

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />

  <!-- CSS -->
  <link rel="stylesheet" href="assets/style.css?v=3" />

  <!-- (ถ้าใช้ Tailwind ในหน้านี้จริงค่อยใส่) -->
  <script>
    window.tailwind = { config: { corePlugins: { preflight: false } } };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google tag (gtag.js) — ใช้ไอดีเดียวกับหน้าแรก -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZCBMS32BKS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-ZCBMS32BKS');
  </script>
</head>

  <body class="m-0 bg-gray-50">
    <section id="purchase" class="section">
      <div class="container mx-auto px-4 py-0">
        <!-- จุด mount ของ React (ต้องมี) -->
        <div id="irt-purchase-root"></div>

        <!-- กล่องแสดง error กรณีโหลดคอมโพเนนต์ไม่สำเร็จ -->
        <div id="irt-error" class="hidden mt-6 rounded-md bg-red-50 p-4 text-red-800 text-sm"></div>

        <noscript>
          <p class="mt-6 text-sm text-red-700">
            จำเป็นต้องเปิดใช้งาน JavaScript เพื่อใช้งานหน้านี้
          </p>
        </noscript>
      </div>
    </section>

    <!-- React/ReactDOM (UMD). ถ้าต้องการโหมด production เปลี่ยนเป็น react.production.min.js -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel แปล JSX/TSX ในเบราว์เซอร์ (เหมาะทดสอบ/หน้าเล็ก ๆ) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- โหลดคอมโพเนนต์ของคุณ (ห้ามมี import/export ข้างในไฟล์นี้) 
         ให้ประกาศเป็น UMD/global เช่น:  window.Page = function Page(props) { ... } -->
    <script
      type="text/babel"
      data-presets="react,typescript"
      src="assets/purchase.jsx?v=3"
    ></script>

    <!-- Bootstrap เรนเดอร์ -->
    <script type="text/babel">
      (function () {
        try {
          const rootEl = document.getElementById('irt-purchase-root');
          const errEl  = document.getElementById('irt-error');

          // อ่าน pkg= จาก query string
          const url = new URL(window.location.href);
          const initPkg = url.searchParams.get('pkg') || 'IRT GOLD PC';

          if (!rootEl) {
            throw new Error('ไม่พบ #irt-purchase-root ในหน้า HTML');
          }
          if (!window.React || !window.ReactDOM) {
            throw new Error('โหลด React/ReactDOM ไม่สำเร็จ');
          }

          // ต้องให้ purchase.jsx กำหนด window.Page
          if (typeof window.Page !== 'function') {
            throw new Error('ไม่พบคอมโพเนนต์ Page (คาดว่า assets/purchase.jsx ยังไม่ได้กำหนด window.Page)');
          }

          const root = ReactDOM.createRoot(rootEl);
          root.render(<Page initPackage={initPkg} />);
        } catch (e) {
          // แสดง error ที่หน้า (ช่วยดีบักเวลาไฟล์ JSX โหลดไม่ติด)
          const el = document.getElementById('irt-error');
          if (el) {
            el.classList.remove('hidden');
            el.textContent = 'เกิดข้อผิดพลาด: ' + (e?.message || e);
          }
          console.error(e);
        }
      })();
    </script>
  </body>
</html>
